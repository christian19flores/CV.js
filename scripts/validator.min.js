var validator=function(e,t,n){"use strict";function a(e){f.validation.validate===!0&&(e.valid===!0?f.callbacks.success(e):e.valid===!1&&(i(e),f.callbacks.fail(e)))}function r(){var e=[];for(var t in g){var n=g[t]();n.valid!==!0&&e.push(n)}if(f.validation.validate===!0){if(0===e.length)return!0;for(var a=0;a<e.length;a++)i(e[a]);return!1}}function i(e){if(f.validation.tooltips===!0){var n=e.element.parentElement;d(n);var a=t.createElement("div");a.innerHTML=e.message,a.setAttribute("class","vjs-error-tip"),n.style.position="relative",n.appendChild(a),a.style.marginLeft="-"+a.offsetWidth/2+"px"}}function d(e){for(var t=this!==n?this.parentElement:e,a=t.querySelectorAll(".vjs-error-tip"),r=0;r<a.length;r++)t.removeChild(a[r])}function l(){for(var e,t=0;t<p.length;t++)for(var a=p[t],r=0;r<a.patterns.length;r++)this.value.match(a.patterns[r])&&(e=a);typeof e!==n&&(s(this,e),f.lastProvider!==e&&f.animation.enabled===!0&&new moveCard(e.name,f.animation.speed/1e3*60,f.animation.easing?f.animation.equation:null),f.lastProvider=e)}function s(e,t){if(e.value!==e.lastValue&&f.validation.formatting===!0){for(var a=e.selectionStart,r=e.value.replace(/[^0-9]/gi,""),i=[],d=0,l=0;d<r.length;d++)i[l]=i[l]===n?r[d]:i[l]+r[d],i[l].length===t.split[l]&&l++;for(var d=a-1;d>=0;d--)(e.value[d]<"0"||e.value[d]>"9")&&a--;a+=Math.floor(a/t.split.length),e.maxLength=t.max[0]+(i.length-1),e.value=e.lastValue=i.join(" "),e.selectionStart=e.selectionEnd=a,L.maxLength=t.max[1]}}function v(e){if(/[^0-9-\s]+/.test(e))return!1;var t=0,n=0,a=!1;e=e.replace(/\D/g,"");for(var r=e.length-1;r>=0;r--){var i=e.charAt(r),n=parseInt(i,10);a&&(n*=2)>9&&(n-=9),t+=n,a=!a}return t%10===0}function c(e,t){for(var n in t)try{t[n].constructor==Object?e[n]=c(e[n],t[n]):e[n]=t[n]}catch(a){e[n]=t[n]}return e}function o(){u=t.getElementById(f.selectors.cardName),m=t.getElementById(f.selectors.cardNumber),L=t.getElementById(f.selectors.cardCVC),E=t.getElementById(f.selectors.cardExpMonth),h=t.getElementById(f.selectors.cardExpYear),f.validation.tooltips===!0&&(u[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"click":"onclick",d,!1),m[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"click":"onclick",d,!1),L[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"click":"onclick",d,!1),E[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"click":"onclick",d,!1),h[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"click":"onclick",d,!1),u[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"focus":"onfocus",d,!1),m[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"focus":"onfocus",d,!1),L[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"focus":"onfocus",d,!1),E[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"focus":"onfocus",d,!1),h[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"focus":"onfocus",d,!1)),f.validation.onBlur===!0&&(u[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"blur":"onblur",function(){a(g.name())},!1),m[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"blur":"onblur",function(){a(g.number())},!1),L[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"blur":"onblur",function(){a(g.cvc())},!1),E[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"blur":"onblur",function(){a(g.expMonth())},!1),h[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"blur":"onblur",function(){a(g.expYear())},!1)),m[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"keyup":"onkeyup",l,!1),m[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"keydown":"onkeydown",l,!1),m[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"paste":"onpaste",l,!1)}var u,m,E,h,L,f={validation:{validate:!0,formatting:!0,tooltips:!1,onBlur:!0},selectors:{cardName:"vjs-card-name",cardNumber:"vjs-card-number",cardCVC:"vjs-card-cvc",cardExpMonth:"vjs-card-exp-month",cardExpYear:"vjs-card-exp-year"},animation:{enabled:!1,speed:1e3,easing:!0,equation:"easeInOutExpo"},callbacks:{success:function(){},fail:function(){}}},p=[{name:"default",patterns:[/^/],max:[16,4],split:[4,4,4,4]},{name:"amex",patterns:[/^3[47]/],max:[15,4],split:[4,6,5]},{name:"discover",patterns:[/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/],max:[16,3],split:[4,4,4,4]},{name:"jcb",patterns:[/^35(2[89]|[3-8][0-9])/],max:[16,3],split:[4,4,4,4]},{name:"maestro",patterns:[/^(5018|5020|5038|6304|6759|676[1-3])/],max:[19,3],split:[4,4,4,4]},{name:"mastercard",patterns:[/^5[1-5]/],max:[16,3],split:[4,4,4,4]},{name:"visa",patterns:[/^(4026|417500|4508|4844|491(3|7))/,/^4/],max:[16,3],split:[4,4,4,4]},{name:"dinersclub",patterns:[/^3(?:0[0-5]|[68][0-9])/],max:[14,3],split:[4,4,4,4]}],g={name:function(){return 0===u.value.length?{valid:!1,error:"length",message:"Name Required",element:u}:u.value.match(/^([^0-9]*)$/)?[{valid:!0,element:u}]:{valid:!1,error:"invalid",message:"Invalid Name",element:u}},number:function(){return 0===m.value.length?{valid:!1,error:"length",message:"Card Number Required",element:m}:!v(m.value.replace(/[^0-9]/gi,""))||m.value.replace(/[^0-9]/gi,"").length<=11?{valid:!1,error:"invalid",message:"Invalid Card Number",element:m}:{valid:!0,element:m}},cvc:function(){return 0===L.value.length?{valid:!1,error:"length",message:"CVC Required",element:L}:L.value.match(/^[0-9]{3,4}$/)?{valid:!0,element:L}:[{valid:!1,error:"length",message:"Invalid CVC",element:L}]},expMonth:function(){return 0===E.value.length?{valid:!1,error:"length",message:"Month Required",element:E}:"SELECT"==E.tagName&&0===E.selectedIndex?{valid:!1,error:"invalid",message:"Invalid Month",element:E}:{valid:!0,element:E}},expYear:function(){return 0===h.value.length?{valid:!1,error:"length",message:"Year Required",element:h}:"SELECT"==h.tagName&&0===h.selectedIndex?{valid:!1,error:"invalid",message:"Invalid Year",element:h}:{valid:!0,element:h}}};return{init:function(e){f=c(f,e),o()},validateCard:r}}(window,document);